{% extends 'base.html' %}
{% block content %}

<div class="col-12 text-center d-flex flex-column justify-content-center align-items-center">
    <h3>Cadastro de novo usuário</h3>
    <p><strong class="red">Atenção!</strong> Tenha em mente que o usuário que você adicionar agora <strong class="red">terá privilégios de administrador</strong> do app.</p>

    <form class="col-sm-6 col-10 mt-2" action="" method='POST'>
        {{ form.csrf_token }}
        <div class="input-group my-2">
            <span class="input-group-text shadow-sm" id="usuario">@</span>
            <input type="text" class="form-control shadow-sm" placeholder="Usuário do novo admin" aria-label="usuario" aria-describedby="usuario" id="usuario" name="usuario" required>
        </div>
        <div class="input-group my-2">
            <span class="input-group-text shadow-sm" id="usuario"><i class="bi bi-lock"></i></span>
            <input type="password" class="form-control shadow-sm" placeholder="Senha do novo admin" aria-label="senha" aria-describedby="senha" id="senha" name="senha" required>
        </div>
        <div class="input-group my-2">
            <span class="input-group-text shadow-sm" id="email"><i class="bi bi-envelope"></i></span>
            <input type="email" class="form-control shadow-sm" placeholder="E-mail do novo admin" aria-label="email" aria-describedby="email" id="email" name="email" required>
        </div>
        <div class="col-12">
            {{ form.enviar(class="btn submit-btn shadow-sm my-2", type="submit") }}
        </div>
    </form>

</div>

{% if cadastro is defined%}
    {% if not cadastro %}
        <div class="modal fade" id="cadastroFalha" tabindex="-1" aria-labelledby="ModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Cadastro falhou</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Algum erro aconteceu quando tentamos cadastrar o novo usuário! Tente novamente ou entre em contato com os desenvolvedores!
            </div>
            <div class="modal-footer">
                <button type="button" class="btn submit-btn shadow-sm" data-bs-dismiss="modal">Fechar</button>
            </div>
            </div>
        </div>
        </div>
    {% endif %}
{% endif %}

<script>
    $(document).ready(function(){
        if ($('#cadastroFalha').length) {
            $('#cadastroFalha').modal('show');
        }
    })
</script>

{% endblock %}